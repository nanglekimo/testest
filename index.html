<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å…¬æœƒè½‰è·é‘‘å®šç³»çµ±</title>
    <style>
        :root {
            --bg-color: #000000;
            --card-bg: rgba(28, 28, 30, 0.65); /* iOS System Gray 6 + Opacity */
            --text-main: #ffffff;
            --text-sub: #8e8e93; /* iOS System Gray */
            --accent-blue: #0a84ff; /* iOS System Blue */
            --accent-green: #30d158;
            --accent-red: #ff453a;
            --border-color: rgba(255, 255, 255, 0.12);
            --blur-strength: 20px;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            height: min-height;
            display: flex;
            justify-content: center;
            flex-direction: column;
            background-image: linear-gradient(160deg, #1c1c1e 0%, #000000 100%);
            overflow-y: auto;
        }

        .app-container {
            width: 100%;
            max-width: 480px;
            padding: 40px 24px;
            margin: auto;
            position: relative;
        }

        /* iOS Glassmorphism Card */
        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            -webkit-backdrop-filter: blur(var(--blur-strength));
            border-radius: 24px;
            padding: 32px 24px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
            text-align: center;
            transition: transform 0.3s ease, opacity 0.3s ease;
            position: relative; /* For the new nav links */
        }

        h1 {
            font-weight: 700;
            font-size: 24px;
            margin-bottom: 12px;
            letter-spacing: -0.5px;
        }

        h2 {
            font-weight: 600;
            font-size: 20px;
            margin-bottom: 24px;
        }
        
        /* é‡å°æ”¿ç­–é é¢çš„ h3 */
        .policy-content h3 {
            font-size: 18px;
            font-weight: 600;
            margin-top: 20px;
            margin-bottom: 8px;
            text-align: left;
        }
        
        .policy-content p {
            text-align: left;
            margin-bottom: 16px;
            font-size: 14px; /* æ”¿ç­–é é¢æ–‡å­—å°ä¸€é» */
            color: var(--text-sub);
        }
        .policy-content ul {
            text-align: left;
            margin: 0 0 16px 20px;
            padding: 0;
            list-style-type: disc;
            color: var(--text-sub);
        }
        .policy-content li {
            font-size: 14px;
            margin-bottom: 5px;
        }

        p {
            color: var(--text-sub);
            font-size: 15px;
            line-height: 1.5;
            margin-bottom: 32px;
        }

        /* iOS Style Buttons */
        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
        }

        .btn {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-main);
            border: none;
            padding: 16px;
            border-radius: 14px;
            font-size: 17px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
            width: 100%;
            text-align: center;
        }

        .btn:active {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(0.98);
        }

        .btn-primary {
            background: var(--accent-blue);
            color: white;
        }

        .btn-primary:active {
            background: #0071e3;
        }

        .option-btn {
            text-align: left;
            padding: 18px 20px;
            font-size: 15px;
            line-height: 1.4;
            background: rgba(44, 44, 46, 0.8);
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            margin-bottom: 24px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--accent-blue);
            width: 0%;
            transition: width 0.4s ease;
        }

        /* Image Overlay for Waiter */
        .image-overlay {
            width: 100%;
            height: 250px;
            background-size: cover;
            background-position: center;
            border-radius: 16px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        /* Utilities */
        .hidden { display: none; }
        .fade-in { animation: fadeIn 0.5s forwards; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* Result Specifics */
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            font-size: 14px;
        }
        .highlight { color: var(--accent-blue); font-weight: 600; }

        /* ======== Collapsible Card & Analysis ======== */
        .collapsible-card {
            background: rgba(44, 44, 46, 0.8); /* iOS System Gray 5 */
            border-radius: 12px;
            padding: 0;
            margin-bottom: 20px;
            overflow: hidden;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: left;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            font-size: 16px;
            font-weight: 600;
        }

        .card-content {
            padding: 0 20px;
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-sub);
            max-height: 0; /* Initially collapsed */
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding 0.4s ease-out;
        }

        .collapsible-card.active .card-content {
            max-height: 300px; /* Adjust height as needed */
            padding-bottom: 20px; 
            padding-top: 10px;
        }

        .collapse-icon {
            transition: transform 0.3s ease;
            font-size: 12px;
            color: var(--text-sub);
        }

        .collapsible-card.active .collapse-icon {
            transform: rotate(180deg);
        }

        /* Analysis Block Style */
        .analysis-block {
            margin-bottom: 24px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 16px 20px;
            text-align: left;
        }
        .analysis-item {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }
        .analysis-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }
        .item-label {
            font-size: 12px;
            color: var(--text-sub);
            font-weight: 500;
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .item-content {
            font-size: 15px;
            font-weight: 500;
            color: var(--text-main);
        }
        
        /* ======== NEW: Navigation Links (åº•éƒ¨å°èˆª) ======== */
        .nav-links {
            position: absolute;
            bottom: -30px; /* æ”¾åœ¨å¡ç‰‡ä¸‹æ–¹ */
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .nav-link {
            color: var(--text-sub);
            font-size: 14px;
            text-decoration: none;
            cursor: pointer;
            transition: color 0.2s;
        }
        .nav-link:hover {
            color: var(--text-main);
        }
        
    </style>
</head>
<body>

<div class="app-container">

    <div id="gatekeeper-screen" class="glass-card fade-in">
        <h1>System Access</h1>
        <p>æ­¡è¿ä¾†åˆ°ç•°ä¸–ç•Œå†’éšªè€…å…¬æœƒã€‚<br>ç³»çµ±æª¢æ¸¬åˆ°é™Œç”Ÿçš„éˆé­‚æ³¢å‹•ã€‚</p>
        <h2>è«‹å•æ‚¨æ˜¯ç¬¬ä¸€æ¬¡ä¾†å—ï¼Ÿ</h2>
        
        <div class="btn-group">
            <button class="btn btn-primary" onclick="handleNewUser()">æˆ‘æ˜¯æœƒå“¡</button>
            <button class="btn" onclick="handleVeteranUser()">æ˜¯ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ä¾†</button>
        </div>
        
        <div class="nav-links">
            <span class="nav-link" onclick="showScreen('privacy-policy-screen')">éš±ç§æ¬Šæ”¿ç­–</span>
            <span class="nav-link" onclick="showScreen('contact-us-screen')">è¯çµ¡æˆ‘å€‘</span>
        </div>
    </div>

    <div id="waiter-screen" class="glass-card hidden">
        <div class="image-overlay" style="background-image: url('https://images.unsplash.com/photo-1556740738-b6a63e27c4df?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80');"></div>
        <h2>æ­£åœ¨ç‚ºæ‚¨å®‰æ’å°ˆå±¬å¼•å°...</h2>
        <p>ã€Œå•Š... å¤±ç¦®äº†ã€‚ã€</p>
        <p>ç³»çµ±å°‡åœ¨ 3 ç§’å¾Œè·³è½‰è‡³ç™»å…¥é é¢ã€‚</p>
        <div style="margin-top:20px;">
            <span style="font-size: 24px;">â³</span>
        </div>
    </div>

    <div id="intro-screen" class="glass-card hidden">
        <h1>Identity Check</h1>
        <div style="font-size: 40px; margin: 20px 0;">ğŸ›¡ï¸</div>
        <p>ã€Œå•Š... å¤±ç¦®äº†ã€‚ã€</p>
        <p>æ—¢ç„¶æ‚¨æ˜¯ç¬¬ä¸€æ¬¡ä¾†ï¼Œé‚£å°±è®“æˆ‘ç¢ºèªæ‚¨çš„<strong>çœŸå¯¦è·æ¥­</strong>èˆ‡<strong>éˆé­‚å±¬æ€§</strong>å§ã€‚</p>
        <button class="btn btn-primary" onclick="startQuiz()">é–‹å§‹é‘‘å®š</button>
    </div>

    <div id="quiz-screen" class="glass-card hidden">
        <div class="progress-container">
            <div class="progress-fill" id="progress-bar"></div>
        </div>
        <h2 id="question-text" style="min-height: 60px;">Question</h2>
        <div id="options-container" class="btn-group">
            </div>
    </div>

    <div id="result-screen" class="glass-card hidden">
        <div style="font-size: 13px; color: var(--text-sub); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px;">Analysis Complete</div>
        
        <div id="result-icon" style="font-size: 48px; margin-bottom: 10px;">ğŸ”¥</div>
        <h1 id="result-title" style="color: var(--accent-blue); font-size: 28px;">è·æ¥­åç¨±</h1>
        <div class="collapsible-card" onclick="toggleCollapse(this)">
            <div class="card-header">
                <strong>ğŸ“œ è·æ¥­èµ·æºæ•…äº‹</strong>
                <span class="collapse-icon">â–¼</span>
            </div>
            <div class="card-content" id="story-block">
                </div>
        </div>

        <div class="analysis-block">
            <div class="analysis-item">
                <div class="item-label">ğŸ‘¤ æ ¸å¿ƒæ€§æ ¼ (Personality)</div>
                <div class="item-content" id="analysis-personality"></div>
            </div>
            <div class="analysis-item">
                <div class="item-label">ğŸ“Š æ“ä½œé¢¨æ ¼ (Style)</div>
                <div class="item-content" id="analysis-style"></div>
            </div>
        </div>

        <div style="background: rgba(255,255,255,0.05); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; margin-bottom: 24px;">
            <div class="stat-row">
                <span>å…ƒç´  (Element)</span>
                <span id="stat-element" class="highlight">Fire</span>
            </div>
            <div class="stat-row">
                <span>è·æ¥­ (Class)</span>
                <span id="stat-class" class="highlight">Warrior</span>
            </div>
            <div class="stat-row" style="border-bottom: none;">
                <span>é¢¨éšªåå¥½</span>
                <span id="stat-risk">High</span>
            </div>
        </div>

        <div style="background: rgba(10, 132, 255, 0.15); border: 1px solid rgba(10, 132, 255, 0.3); padding: 16px; border-radius: 12px; margin-bottom: 20px; text-align: left;">
            <strong style="color: #60a5fa; display: block; margin-bottom: 8px; font-size: 13px;">ğŸ’¡ å…¬æœƒå»ºè­°</strong>
            <p id="result-solution" style="margin: 0; font-size: 13px; color: #d1d5db;">Solution text.</p>
        </div>

        <button id="cta-btn" class="btn btn-primary" onclick="handleCTA(this)">
            é ˜å–å°ˆå±¬æ”»ç•¥æ›¸
        </button>
        <button class="btn" style="margin-top: 10px; background: transparent; color: var(--text-sub);" onclick="location.reload()">é‡æ–°é‘‘å®š</button>
    </div>

    <div id="privacy-policy-screen" class="glass-card hidden">
        <h1 style="font-size: 28px;">ğŸ›¡ï¸ éš±ç§æ¬Šæ”¿ç­–</h1>
        <div style="font-size: 12px; color: var(--text-sub); margin-bottom: 30px;">ç”Ÿæ•ˆæ—¥æœŸï¼š2025 å¹´ 11 æœˆ 23 æ—¥</div>
        
        <div class="policy-content">
            <p><strong>[æ‚¨çš„ç¶²ç«™åç¨±/å…¬æœƒåç¨±]</strong> å°Šé‡ä¸¦æ‰¿è«¾ä¿è­·æ‚¨çš„å€‹äººéš±ç§ã€‚æœ¬æ”¿ç­–èªªæ˜äº†ç•¶æ‚¨ä½¿ç”¨æœ¬é‘‘å®šç³»çµ±æ™‚ï¼Œæˆ‘å€‘å¦‚ä½•æ”¶é›†ã€ä½¿ç”¨å’Œä¿è­·æ‚¨çš„è³‡è¨Šã€‚</p>

            <h3>æ”¶é›†çš„è³‡è¨Š</h3>
            <p>åœ¨ä½¿ç”¨æœ¬é‘‘å®šç³»çµ±æ™‚ï¼Œæˆ‘å€‘åƒ…æ”¶é›†ä»¥ä¸‹**éå€‹äººèº«ä»½è­˜åˆ¥è³‡è¨Š**ï¼š</p>
            <ul>
                <li><strong>æ¸¬é©—ç­”æ¡ˆï¼š</strong> æ‚¨åœ¨é‘‘å®šå•ç­”ä¸­çš„é¸æ“‡ã€‚é€™äº›ç­”æ¡ˆè¢«ç”¨æ–¼å³æ™‚è¨ˆç®—æ‚¨çš„è·æ¥­å±¬æ€§ï¼Œä¸¦åœ¨æœƒè©±çµæŸå¾Œå³æ™‚æ¸…é™¤ã€‚</li>
                <li><strong>è¨­å‚™è³‡è¨Šï¼š</strong> æ‚¨çš„ç€è¦½å™¨é¡å‹ã€æ“ä½œç³»çµ±ã€è¨ªå•æ™‚é–“ç­‰æ¨™æº–æ—¥èªŒæ•¸æ“šï¼Œç”¨æ–¼æ”¹å–„ç³»çµ±å…¼å®¹æ€§ã€‚</li>
            </ul>

            <h3>è³‡è¨Šä½¿ç”¨</h3>
            <p>æˆ‘å€‘æ”¶é›†çš„è³‡è¨Šåƒ…ç”¨æ–¼ä»¥ä¸‹ç›®çš„ï¼š</p>
            <ul>
                <li>æä¾›ä¸¦å®Œå–„è½‰è·é‘‘å®šçµæœæœå‹™ã€‚</li>
                <li>åˆ†æç”¨æˆ¶è¡Œç‚ºæ¨¡å¼ï¼Œä»¥å„ªåŒ–å•ç­”è¨­è¨ˆå’Œç”¨æˆ¶é«”é©—ã€‚</li>
            </ul>
            <p><strong>æœ¬ç³»çµ±ä¸æœƒå„²å­˜ä»»ä½•å€‹äººèº«ä»½è³‡è¨Šï¼ˆå¦‚å§“åã€é›»å­éƒµä»¶ã€IP åœ°å€ï¼‰ã€‚</strong> æ‚¨çš„æ¸¬é©—çµæœç‚ºä¸€æ¬¡æ€§è¨ˆç®—ï¼Œä¸æœƒè¢«é€£çµåˆ°ä»»ä½•å€‹äººæ¨™è­˜ã€‚</p>

            <h3>ç¬¬ä¸‰æ–¹æœå‹™ (AdSense)</h3>
            <p>æœ¬ç¶²ç«™å¯èƒ½é€é Google AdSense æœå‹™é¡¯ç¤ºå»£å‘Šã€‚Google å¯èƒ½æœƒä½¿ç”¨ Cookie å’Œ Web Beacon ä¾†æ”¶é›†éå€‹äººåŒ–è³‡è¨Šï¼Œä»¥ä¾¿å‘æ‚¨æä¾›æ‚¨å¯èƒ½æ„Ÿèˆˆè¶£çš„å»£å‘Šã€‚è«‹åƒé–± Google çš„éš±ç§æ¬Šæ”¿ç­–ä»¥äº†è§£æ›´å¤šè³‡è¨Šã€‚</p>
        </div>

        <button class="btn btn-primary" style="margin-top: 20px;" onclick="showScreen('gatekeeper-screen')">è¿”å›é¦–é </button>
    </div>

    <div id="contact-us-screen" class="glass-card hidden">
        <h1 style="font-size: 28px;">ğŸ“§ è¯çµ¡æˆ‘å€‘</h1>
        <div style="font-size: 40px; margin: 20px 0;">ğŸ“œ</div>
        <p>è‹¥æ‚¨å°é‘‘å®šç³»çµ±æœ‰ä»»ä½•ç–‘å•ã€åˆä½œææ¡ˆæˆ–æŠ€è¡“åé¥‹ï¼Œè«‹é€éä»¥ä¸‹æ–¹å¼èˆ‡å…¬æœƒç®¡ç†å“¡è¯ç¹«ã€‚</p>
        
        <div class="analysis-block" style="text-align: left;">
            <div class="analysis-item">
                <div class="item-label">å…¬æœƒä¿¡ç®± (Email)</div>
                <div class="item-content" style="word-break: break-all;">
                    <a href="mailto:your.guild.email@example.com" style="color: var(--accent-blue); text-decoration: none;">your.guild.email@example.com</a>
                </div>
            </div>
            <div class="analysis-item">
                <div class="item-label">å…¬æœƒç®¡ç†å“¡</div>
                <div class="item-content">ç®¡ç†å“¡ NangleKimo</div>
            </div>
            <div class="analysis-item" style="border-bottom: none; padding-bottom: 0;">
                <div class="item-label">å›è¦†æ™‚æ•ˆ</div>
                <div class="item-content">ç´„ 3-5 å€‹å·¥ä½œæ—¥</div>
            </div>
        </div>

        <button class="btn btn-primary" style="margin-top: 20px;" onclick="showScreen('gatekeeper-screen')">è¿”å›é¦–é </button>
    </div>

</div>

<script>
    // ================= 0. DATA =================

    const jobProfiles = {
        fire_warrior: {
            story: "çƒˆç„°ç‹‚æˆ°å£«æ“æœ‰ç‚™ç†±çš„è¡Œå‹•åŠ›ï¼Œç¸½åœ¨å¸‚å ´æœ€ç«ç†±ä¹‹æ™‚ç‡å…ˆè¡é‹’ã€‚ä»–ä»¥ç†±è¡€èˆ‡ç›´è¦ºç‚ºæ­¦å™¨ï¼Œç„¡æ‡¼æ³¢å‹•ã€‚",
            personality: "è¡å‹•ã€ç†±è¡€ã€æ•¢è³­ä¸€æŠŠï¼Œè¡Œå‹•é€Ÿåº¦æ¥µå¿«ã€‚",
            style: "çŸ­ç·šåå¥½ã€è¿½å¼·å‹¢è‚¡ã€æ¶å‹•èƒ½ã€åœææœæ–·ã€‚"
        },
        fire_mage: {
            story: "çƒˆç„°é­”å°å£«ä»¥ç«ç„°ç‚ºåª’ä»‹ï¼Œä»¥æŒ‡æ¨™ç‚ºæ³•æ–ã€‚ä»–å°‡æƒ…ç·’èˆ‡æŠ€è¡“èåˆï¼Œèƒ½åœ¨è½‰æŠ˜è™•å¬å–šçƒˆç„°ã€‚",
            personality: "ç†æ€§èˆ‡æ¿€æƒ…ä¸¦å­˜ï¼Œæ—¢çœ‹æŒ‡æ¨™ä¹Ÿé ç›´è¦ºã€‚",
            style: "å‹•èƒ½ç­–ç•¥ã€çªç ´äº¤æ˜“ã€åå¿«é€Ÿç¯€å¥ã€‚"
        },
        fire_sage: {
            story: "çƒˆç„°å¤§è³¢è€…æ˜¯æ¥µå°‘æ•¸åŒæ™‚æ“æœ‰ç ”ç©¶æ·±åº¦èˆ‡å¼·çƒˆè¡Œå‹•åŠ›çš„äººã€‚ä»–çš„çŸ¥è­˜è¶Šæ·±ï¼Œç«ç„°è¶Šæ—ºã€‚",
            personality: "æ·±æ€ç†Ÿæ…®ä½†æ•¢æå‰å¸ƒå±€ã€‚",
            style: "åŸºæœ¬é¢å°å‘ä½†åç©æ¥µï¼Œæ•¢è²·æˆé•·è‚¡ã€‚"
        },
        fire_rogue: {
            story: "çƒˆç„°ç›œè³Šæ˜¯ç«ä¹‹å½±å­ï¼Œæ“…é•·åœ¨å¸‚å ´ç‹‚ç†±ä¸­æ¶ç¬¬ä¸€æ³¢æ©Ÿæœƒã€‚ä»–çš„çœ¼ä¸­æ°¸é ç‡ƒç‡’è‘—çµç‰©ã€‚",
            personality: "æ•éŠ³ã€åæ‡‰å¿«ã€æ•¢ç©é¡Œæã€‚",
            style: "æ¶ˆæ¯å¤šã€é¡Œæå¿«ã€åƒç¬¬ä¸€æ®µã€å¤šçŸ­ç·šã€‚"
        },

        water_warrior: {
            story: "æ·±æµ·ç‹‚æˆ°å£«å¤–è¡¨å¼·æ‚ï¼Œå…§å¿ƒå»åƒå¤§æµ·èˆ¬å†·éœã€‚ä»–çš„æ¯æ¬¡å‡ºæ“Šéƒ½æœ‰é‚è¼¯æ”¯æ’ã€‚",
            personality: "ç©©å®šã€å‹™å¯¦ã€è¡Œå‹•æ´¾ä½†ä¸è¡å‹•ã€‚",
            style: "ä½ä¼°åå½ˆã€å¿«é€²å¿«å‡ºä½†é¢¨éšªåä½ã€‚"
        },
        water_mage: {
            story: "æ·±æµ·é­”å°å£«é€éå†°å†·çš„æŠ€è¡“èˆ‡é‚è¼¯æŒæ§å¸‚å ´æ³¢å‹•ï¼Œåƒæ½®æ°´èˆ¬ç©©å®šã€‚",
            personality: "å†·éœã€ç²¾ç®—ã€ä»¥æ•¸æ“šç‚ºä¸­å¿ƒã€‚",
            style: "æŠ€è¡“æ“ä½œã€ç ´ç·šå³æ’¤ã€ç¯€å¥ç©©å¥ã€‚"
        },
        water_sage: {
            story: "æ·±æµ·å¤§è³¢è€…æ²‰å…¥è³‡è¨Šæ·±è™•ï¼Œæ´å¯Ÿå…¬å¸é‹ä½œçš„æœ¬è³ªï¼Œåˆ¤æ–·å†·éœç„¡æ¯”ã€‚",
            personality: "ç ”ç©¶æ´¾ã€ç†æ€§ã€ç©©é‡ã€‚",
            style: "åƒ¹å€¼æŠ•è³‡ã€ä½ä¼°å¸ƒå±€ã€é•·æœŸè€å¿ƒã€‚"
        },
        water_rogue: {
            story: "æ·±æµ·ç›œè³Šåœ¨å¸‚å ´ç¸«éš™è£¡æµå‹•ï¼Œå–„æ–¼å»ºç«‹ä½é¢¨éšªå¥—åˆ©ç­–ç•¥ã€‚",
            personality: "å‹™å¯¦ã€å†·éœã€è¨ˆç®—å‹ã€‚",
            style: "ä½é¢¨éšªå¥—åˆ©ã€å°æ³¢æ®µã€æ©Ÿæœƒä¸»ç¾©ã€‚"
        },

        wind_warrior: {
            story: "ç–¾é¢¨ç‹‚æˆ°å£«ä»¥é€Ÿåº¦ç‚ºä¿¡ä»°ï¼Œå¸‚å ´é¢¨å¹è‰å‹•éƒ½èƒ½å¼•ç™¼ä»–çš„è¡Œå‹•ã€‚",
            personality: "æ€¥æ€§å­ã€è¿½æ±‚æ•ˆç‡ã€åæ‡‰æ¥µå¿«ã€‚",
            style: "ç•¶æ²–ã€éš”æ—¥æ²–ã€å¼·å‹¢çªç ´ã€‚"
        },
        wind_mage: {
            story: "ç–¾é¢¨é­”å°å£«æŒæ¡é¢¨çš„ç¯€å¥ï¼Œç”¨æŒ‡æ¨™åˆ¤æ–·æ¯æ¬¡é¢¨å¹çš„æ–¹å‘ã€‚",
            personality: "å–„æ–¼è§€å¯Ÿç¯€å¥ã€æŠ€è¡“ç´°è†©ã€‚",
            style: "å¿«ç¯€å¥æŠ€è¡“äº¤æ˜“ã€çªç ´èˆ‡å›æ¸¬ç­–ç•¥ã€‚"
        },
        wind_sage: {
            story: "ç–¾é¢¨å¤§è³¢è€…ç ”ç©¶å®è§€é¢¨å‘ï¼Œå–„æ–¼æŠ“ä½æœ€é‡è¦çš„è¶¨å‹¢èµ°å‘ã€‚",
            personality: "æ´å¯ŸåŠ›å¼·ã€é‡è¦–å¤§å±€ã€‚",
            style: "è¶¨å‹¢æŠ•è³‡ã€ä¸­é•·æœŸé †å‹¢äº¤æ˜“ã€‚"
        },
        wind_rogue: {
            story: "ç–¾é¢¨ç›œè³Šæ˜¯æ¶ˆæ¯æµç¬¬ä¸€ç·šï¼Œæ°¸é æ¯”ä»–äººæ›´å¿«å—…åˆ°å¸‚å ´æ°£æ¯ã€‚",
            personality: "éˆæ•ã€åæ‡‰å¿«ã€æ“…é•·è³‡è¨Šå·®ã€‚",
            style: "é¡Œææ¶è·‘ã€å¿«è¨Šäº¤æ˜“ã€ä¸ç•™å€‰ã€‚"
        },

        earth_warrior: {
            story: "å¤§åœ°ç‹‚æˆ°å£«æ˜¯æœ€ç©©å®šçš„å‰æ’ï¼Œæ²‰è‘—é¢å°å¸‚å ´æ‰€æœ‰å™ªéŸ³ã€‚",
            personality: "è€æ²‰ã€æŠ—éœ‡ã€ä¸è¼•æ˜“å‹•æ–ã€‚",
            style: "åå½ˆäº¤æ˜“ã€ç©©å¥çŸ­ç·šã€å®‰å…¨ç¬¬ä¸€ã€‚"
        },
        earth_mage: {
            story: "å¤§åœ°é­”å°å£«ç”¨æ™‚é–“èˆ‡ç¯€å¥æ§‹ç¯‰å …å›ºçš„ç­–ç•¥ï¼Œåƒå±±è„ˆèˆ¬å¯é ã€‚",
            personality: "ç©©å¥ã€è¨ˆç•«å‹ã€æœ‰è€æ€§ã€‚",
            style: "ä¸­é•·ç·šæŠ€è¡“ç­–ç•¥ã€å‘¨æœŸè§€å¯Ÿã€‚"
        },
        earth_sage: {
            story: "å¤§åœ°å¤§è³¢è€…æŒæ¡è¤‡åˆ©çš„è¦å¾‹ï¼Œé•·å¹´å …å®ˆæŠ•è³‡ä¿¡ä»°ã€‚",
            personality: "ç©©å¥ã€è€å¿ƒã€æŠ—æ³¢å‹•è¶…é«˜ã€‚",
            style: "å­˜è‚¡ã€é•·æŠ±ã€é…æ¯èˆ‡ä½ä¼°å¸ƒå±€ã€‚"
        },
        earth_rogue: {
            story: "å¤§åœ°ç›œè³Šç²¾é€šä½é¢¨éšªå¥—åˆ©ï¼Œè…³æ­¥è¼•ç›ˆä½†ç­–ç•¥æ²‰ç©©ã€‚",
            personality: "ç²¾ç®—ã€ä½é¢¨éšªåå¥½ã€‚",
            style: "å€é–“å¥—åˆ©ã€å°ç²åˆ©é«˜å‹ç‡äº¤æ˜“ã€‚"
        },

        light_warrior: {
            story: "è–å…‰ç‹‚æˆ°å£«ä»¥ä¿¡å¿µç‚ºåŠï¼Œæœå‘æœªä¾†é¡˜æ™¯å…¨åŠ›è¡åˆºã€‚",
            personality: "æ¨‚è§€ã€ç†±æƒ…ã€è¡Œå‹•æ´¾ã€‚",
            style: "æˆé•·è‚¡è¡åˆºã€é¡Œæè¿½å¤¢ã€ä¸­ç·šåå¤šã€‚"
        },
        light_mage: {
            story: "è–å…‰é­”å°å£«è—‰ç”±æŒ‡æ¨™ç¢ºèªé¡˜æ™¯æ˜¯å¦è¢«å¸‚å ´èªå¯ã€‚",
            personality: "ç†æ€§ + ç†æƒ³æ··åˆã€‚",
            style: "é¡˜æ™¯ + æŠ€è¡“ä¸¦ç”¨ã€ä¸­ç·šæˆé•·è‚¡ã€‚"
        },
        light_sage: {
            story: "è–å…‰å¤§è³¢è€…ç ”ç©¶æœªä¾†æ–‡æ˜è¶¨å‹¢ï¼Œæ“…æ–¼æ—©æœŸç™¼æ˜å·¨å‹æˆé•·è‚¡ã€‚",
            personality: "å‰ç»ã€ç©©é‡ã€æ¨‚è§€ç†æ€§ã€‚",
            style: "é•·æœŸæˆé•·æŠ•è³‡ã€ç§‘æŠ€è¶¨å‹¢å¸ƒå±€ã€‚"
        },
        light_rogue: {
            story: "è–å…‰ç›œè³Šæœƒåœ¨æ•˜äº‹èŒèŠ½æ™‚å·è·‘å¸ƒå±€ï¼Œè¢«ç¨±ç‚ºã€æ•˜äº‹å·è·‘è€…ã€ã€‚",
            personality: "ç›´è¦ºã€å—…è¦ºæ•éŠ³ã€æ“…é æ¸¬æœªä¾†ã€‚",
            style: "æ—©æœŸé¡Œæä½ˆå±€ã€æ•˜äº‹äº¤æ˜“ã€‚"
        },

        dark_warrior: {
            story: "é—‡å½±ç‹‚æˆ°å£«ä»¥ææ‡¼ç‚ºæ­¦å™¨ï¼Œè¶Šæ˜¯å¸‚å ´æ··äº‚ä»–è¶Šå¼·å¤§ã€‚",
            personality: "é€†å‘ã€å†·éœã€æ¥µåº¦æŠ—å£“ã€‚",
            style: "æŠ„åº•ã€é€†å‘é€²å ´ã€ææ…Œæ™‚è²·é€²ã€‚"
        },
        dark_mage: {
            story: "é—‡å½±é­”å°å£«èµ°åœ¨æ‰€æœ‰é¢¨éšªæ¨¡å‹çš„æœ€å‰ç·šï¼Œæ˜¯ã€é˜²ç¦¦ç³»æ³•å¸«ã€ã€‚",
            personality: "ç´°å¿ƒã€ç†æ€§ã€é¿éšªæ´¾ã€‚",
            style: "é¢¨éšªæŒ‡æ¨™é©…å‹•ã€ç©©å¥é¿éšªç­–ç•¥ã€‚"
        },
        dark_sage: {
            story: "é—‡å½±å¤§è³¢è€…èƒ½çœ‹ç©¿æ³¡æ²«æœ¬è³ªï¼Œè¢«ç¨±ç‚ºå¸‚å ´é»‘æš—çš„æ´å¯Ÿè€…ã€‚",
            personality: "æ‚²è§€ä¸­ç«‹ã€æ´å¯Ÿæ·±åº¦æ¥µé«˜ã€‚",
            style: "é€†å‹¢ç ”ç©¶ã€å®è§€é¢¨éšªè§€å¯Ÿã€é¿éšªå¸ƒå±€ã€‚"
        },
        dark_rogue: {
            story: "é—‡å½±ç›œè³Šæ“…é•·åˆ©ç”¨å¸‚å ´ææ…Œçš„ç¸«éš™é€²è¡Œå¥—åˆ©ï¼Œæ˜¯æ··äº‚ä¸­çš„æ”¶å‰²è€…ã€‚",
            personality: "ç²¾ç®—ã€å†·éœã€é€†å‘æ©Ÿæœƒä¸»ç¾©ã€‚",
            style: "ææ…Œå¥—åˆ©ã€æš´è·Œæ’¿å±ã€äº‹ä»¶é©…å‹•ã€‚"
        }
    };

    const elements = {
        fire: { name: "çƒˆç„°", icon: "ğŸ”¥", desc: "ä½ ç›¸ä¿¡ç›´è¦ºèˆ‡å‹•èƒ½ï¼Œå‚¾å‘åœ¨å¸‚å ´æœ€ç†±çµ¡æ™‚é€²å ´ã€‚" },
        water: { name: "æ·±æµ·", icon: "ğŸ’§", desc: "ä½ è¨å­ç›²ç›®ï¼Œå–œæ­¡é€éæ•¸æ“šèˆ‡é‚è¼¯åˆ†ææ‰¾åˆ°ä½ä¼°æ¨™çš„ã€‚" },
        wind: { name: "ç–¾é¢¨", icon: "ğŸŒªï¸", desc: "ä½ å°è³‡è¨Šæ¥µåº¦æ•æ„Ÿï¼Œè¿½æ±‚æ•ˆç‡ï¼Œä¸å–œæ­¡ç­‰å¾…ã€‚" },
        earth: { name: "å¤§åœ°", icon: "â›°ï¸", desc: "ä½ ä¸å‹•å¦‚å±±ï¼Œç›¸ä¿¡æ™‚é–“çš„è¤‡åˆ©ï¼Œå°æ³¢å‹•ç„¡å‹•æ–¼è¡·ã€‚" },
        light: { name: "è–å…‰", icon: "âœ¨", desc: "ä½ æŠ•è³‡çš„æ˜¯æœªä¾†ï¼Œå®¹æ˜“è¢«å®å¤§çš„æ•˜äº‹å¸å¼•ã€‚" },
        dark: { name: "é—‡å½±", icon: "ğŸŒ‘", desc: "ä½ ç¸½æ˜¯èƒ½çœ‹åˆ°ç¹æ¦®èƒŒå¾Œçš„å±æ©Ÿï¼Œå–„æ–¼é¿éšªã€‚" }
    };

    const classes = {
        warrior: { name: "ç‹‚æˆ°å£«", desc: "è¡Œå‹•æ´¾ï¼Œæ‰‹å‹•æ“ä½œé »ç‡é«˜ï¼Œç›¸ä¿¡åŸ·è¡ŒåŠ›ã€‚" },
        mage: { name: "é­”å°å£«", desc: "ç³»çµ±æ´¾ï¼Œä¾è³´æŒ‡æ¨™èˆ‡æ¨¡å‹ï¼Œä¸å¸¶æ„Ÿæƒ…ã€‚" },
        sage: { name: "å¤§è³¢è€…", desc: "ç ”ç©¶æ´¾ï¼Œé‡è¦–åŸºæœ¬é¢ï¼Œæ±ºç­–é€±æœŸé•·ã€‚" },
        rogue: { name: "ç›œè³Š", desc: "æ©Ÿæœƒæ´¾ï¼Œå°‹æ‰¾å¥—åˆ©èˆ‡æ¶ˆæ¯é¢è½å·®ã€‚" }
    };

    const questions = [
        {
            q: "ç•¶å¸‚å ´æš´è·Œ 5%ï¼Œä¸€ç‰‡ææ…Œæ™‚ï¼Œä½ çš„åæ‡‰æ˜¯ï¼Ÿ",
            options: [
                { text: "æ‹”åˆ€æŠ„åº•ï¼é€™æ˜¯éŒ¯æ®ºï¼Œå¿«æ¶åå½ˆï¼", e: { fire: 2, wind: 1 }, c: { warrior: 2 } },
                { text: "ç¿»é–±åœ–æ›¸é¤¨ï¼šç¢ºèªåŸºæœ¬é¢æœ‰æ²’æœ‰æ”¹è®Šï¼Ÿ", e: { water: 2, earth: 1 }, c: { sage: 2 } },
                { text: "æª¢æŸ¥çµç•Œï¼šçœ‹æŠ€è¡“æŒ‡æ¨™æ˜¯å¦è·Œç ´æ”¯æ’ï¼Ÿ", e: { wind: 1, dark: 1 }, c: { mage: 2 } },
                { text: "æš—ä¸­è§€å¯Ÿï¼šçœ‹æœ‰æ²’æœ‰äººçˆ†å€‰ï¼Œæº–å‚™æ’¿å±é«”ã€‚", e: { dark: 2, fire: 1 }, c: { rogue: 2 } }
            ]
        },
        {
            q: "ä½ é€²å…¥å¸‚å ´å‰¯æœ¬æ™‚ï¼Œæ‰‹ä¸Šä¸€å®šè¦æ‹¿è‘—ä»€éº¼ï¼Ÿ",
            options: [
                { text: "æ‰‹æ©Ÿçœ‹ç›¤è»Ÿé«”ï¼šé€Ÿåº¦æœ€é‡è¦ã€‚", e: { wind: 2 }, c: { warrior: 2, rogue: 1 } },
                { text: "è¤‡é›œçš„ç·šåœ–ï¼šå¸ƒæ—é€šé“æ˜¯æˆ‘çš„æ³•æ–ã€‚", e: { fire: 1, water: 1 }, c: { mage: 2 } },
                { text: "ç”¢æ¥­ç ”ç©¶å ±å‘Šï¼šäº†è§£å…¬å¸çš„éˆé­‚ã€‚", e: { light: 1, earth: 1 }, c: { sage: 2 } },
                { text: "Twitter/æ–°èå¿«è¨Šï¼šè©±é¡Œå°±æ˜¯éŒ¢ã€‚", e: { wind: 2, fire: 1 }, c: { rogue: 2 } }
            ]
        },
        {
            q: "ä½ çš„ä¸€ç­†äº¤æ˜“é€šå¸¸æœƒæŒæœ‰ï¼ˆè© å”±ï¼‰å¤šä¹…ï¼Ÿ",
            options: [
                { text: "ç¬ç™¼ (ç•¶æ²–)ï¼šçµ•ä¸ç•™å€‰éå¤œã€‚", e: { wind: 2, fire: 1 }, c: { warrior: 2, rogue: 1 } },
                { text: "çŸ­æ³¢æ®µ (æ•¸é€±)ï¼šç­‰å¾…è¶¨å‹¢å®Œæˆã€‚", e: { water: 1, fire: 1 }, c: { mage: 1, rogue: 1 } },
                { text: "æ°¸ä¹… (å­˜è‚¡)ï¼šé™¤éä¸–ç•Œæ¯€æ»…ä¸è³£ã€‚", e: { earth: 3, light: 2 }, c: { sage: 1 } },
                { text: "ç›´åˆ°é¡˜æ™¯å¯¦ç¾ï¼šå¯èƒ½æ˜¯ä¸€å¹´æˆ–åå¹´ã€‚", e: { light: 3 }, c: { sage: 2 } }
            ]
        },
        {
            q: "åœ¨å†’éšªéç¨‹ä¸­ï¼Œä½ æœ€å¸¸å—åˆ°çš„è² é¢ç‹€æ…‹æ˜¯ï¼Ÿ",
            options: [
                { text: "æ··äº‚ï¼šè³‡è¨Šå¤ªå¤šï¼Œä¸çŸ¥è½èª°çš„ã€‚", e: { wind: 2, light: 1 }, c: { rogue: 1, warrior: 1 } },
                { text: "ç‹‚æš´ï¼šæƒ…ç·’å¤±æ§ï¼Œè¿½é«˜æ®ºä½ã€‚", e: { fire: 3 }, c: { warrior: 2 } },
                { text: "çŸ³åŒ–ï¼šç ”ç©¶å¤ªä¹…ï¼Œä¸æ•¢é€²å ´ã€‚", e: { water: 2, dark: 1 }, c: { sage: 2 } },
                { text: "æ•…éšœï¼šéåº¦ä¾è³´æŒ‡æ¨™å»å¤±éˆã€‚", e: { water: 1, earth: 1 }, c: { mage: 2 } }
            ]
        },
        {
            q: "å¦‚æœæœ‰å€‹ç²¾éˆèƒ½å¹«ä½ ï¼Œä½ å¸Œæœ›ç¥‚åšä»€éº¼ï¼Ÿ",
            options: [
                { text: "å¹«æˆ‘éæ¿¾é›œéŸ³ï¼åªçµ¦é—œéµæƒ…å ±ã€‚", e: { wind: 2, fire: 1 }, c: { warrior: 1, rogue: 2 } },
                { text: "å¹«æˆ‘ç›£æ§é¢¨éšªï¼å¿«å´©ç›¤æ™‚å«æˆ‘ã€‚", e: { earth: 1, dark: 2 }, c: { sage: 1 } },
                { text: "çµ¦æˆ‘æ˜ç¢ºè²·è³£é»ï¼å‘Šè¨´æˆ‘å‹ç‡ã€‚", e: { fire: 1, water: 1 }, c: { mage: 2 } },
                { text: "å‘Šè¨´æˆ‘ä¸‹ä¸€å€‹å‰å¤§è¶¨å‹¢åœ¨å“ªï¼Ÿ", e: { light: 2 }, c: { sage: 1, rogue: 1 } }
            ]
        }
    ];

    let currQ = 0;
    let eScores = { fire:0, water:0, wind:0, earth:0, light:0, dark:0 };
    let cScores = { warrior:0, mage:0, sage:0, rogue:0 };

    // ================= 1. FLOW LOGIC =================

    function handleNewUser() {
        alert("å¥½çš„ï¼Œå†’éšªè€…å¤§äººï¼Œè«‹å¾€é€™é‚Šèµ°ã€‚");
        showScreen('waiter-screen');
        setTimeout(() => {
            // è·³è½‰ç›®æ¨™ï¼šæœƒå“¡ç™»å…¥é 
            window.location.href = "https://nanglekimo.github.io/testest/login.html"; 
        }, 3000);
    }

    function handleVeteranUser() {
        // å› ç‚ºã€Œç¬¬ä¸€æ¬¡ä¾†ã€è¡¨ç¤ºé–‹å§‹æ¸¬é©—
        showScreen('intro-screen');
    }

    function startQuiz() {
        showScreen('quiz-screen');
        renderQuestion();
    }

    // [ä¿®æ”¹] showScreen å‡½æ•¸ï¼Œç¢ºä¿æ¯æ¬¡åˆ‡æ›é é¢æ™‚ï¼ŒèˆŠé é¢éƒ½è¢«éš±è—ï¼Œæ–°é é¢è¢«é¡¯ç¤º
    function showScreen(id) {
        document.querySelectorAll('.app-container > div').forEach(div => div.classList.add('hidden'));
        const target = document.getElementById(id);
        target.classList.remove('hidden');
        target.classList.add('fade-in');
        
        // ã€æ–°å¢ã€‘é‡å°éš±ç§æ¬Šå’Œè¯çµ¡æˆ‘å€‘é é¢ï¼Œç¢ºä¿å…¶å…§å®¹ä½æ–¼é ‚éƒ¨
        if (id === 'privacy-policy-screen' || id === 'contact-us-screen') {
            document.body.scrollTop = 0; // For Safari
            document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
        }
    }

    // ================= 2. QUIZ LOGIC =================
    
    // [æ–°å¢] æ´—ç‰Œå‡½æ•¸
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function renderQuestion() {
        const q = questions[currQ];
        document.getElementById('question-text').innerText = q.q;
        
        const pct = ((currQ) / questions.length) * 100;
        document.getElementById('progress-bar').style.width = `${pct}%`;

        const container = document.getElementById('options-container');
        container.innerHTML = '';

        // [ä¿®æ”¹] è¤‡è£½ä¸€ä»½é¸é …é™£åˆ—ä¸¦é€²è¡Œéš¨æ©Ÿæ’åº
        const shuffledOptions = shuffleArray([...q.options]);

        shuffledOptions.forEach((opt, idx) => {
            const btn = document.createElement('button');
            btn.className = 'btn option-btn';
            btn.innerText = opt.text;
            btn.style.animation = `fadeIn 0.3s ease forwards ${idx * 0.1}s`;
            btn.style.opacity = '0'; 
            
            btn.onclick = () => {
                if(opt.e) Object.keys(opt.e).forEach(k => eScores[k] += opt.e[k]);
                if(opt.c) Object.keys(opt.c).forEach(k => cScores[k] += opt.c[k]);
                nextQuestion();
            };
            container.appendChild(btn);
        });
    }

    function nextQuestion() {
        currQ++;
        if (currQ < questions.length) {
            renderQuestion();
        } else {
            document.getElementById('progress-bar').style.width = '100%';
            setTimeout(showResult, 300);
        }
    }

    function showResult() {
        showScreen('result-screen');

        const maxE = Object.keys(eScores).reduce((a, b) => eScores[a] > eScores[b] ? a : b);
        const maxC = Object.keys(cScores).reduce((a, b) => cScores[a] > cScores[b] ? a : b);

        const eData = elements[maxE];
        const cData = classes[maxC];
        
        // NEW: Get Job Profile Key and Data
        const jobKey = `${maxE}_${maxC}`;
        const profileData = jobProfiles[jobKey] || {}; // Fallback in case of missing data

        // UI Updates - Title
        document.getElementById('result-icon').innerText = eData.icon;
        document.getElementById('result-title').innerText = `${eData.name}${cData.name}`;

        // UI Updates - Detailed Profile
        document.getElementById('story-block').innerText = profileData.story || "æ­¤è·æ¥­çš„èµ·æºæ•…äº‹æ­£åœ¨æ’°å¯«ä¸­...";
        document.getElementById('analysis-personality').innerText = profileData.personality || "æœªçŸ¥é ˜åŸŸï¼Œå¾…ç™¼æ˜ã€‚";
        document.getElementById('analysis-style').innerText = profileData.style || "æœªçŸ¥é ˜åŸŸï¼Œå¾…ç™¼æ˜ã€‚";

        // UI Updates - Stats
        document.getElementById('stat-element').innerText = eData.name;
        document.getElementById('stat-class').innerText = cData.name;
        document.getElementById('stat-risk').innerText = (maxE === 'fire' || maxE === 'wind') ? "é«˜ (High)" : (maxE === 'dark' ? "ä¸­ (Moderate)" : "ä½ (Low)");

        // Solution Logic
        let solution = "";
        if (maxE === 'wind' || maxE === 'fire') {
            solution = "æ‚¨çš„å±¬æ€§é¡¯ç¤ºæ‚¨æ˜“å—å¸‚å ´é›œè¨Šå¹²æ“¾ã€‚æˆ‘å€‘æä¾›<b>ã€Œé™å™ªé›·é”ã€</b>ï¼Œæ¯æ—¥éæ¿¾ç„¡æ•ˆè³‡è¨Šï¼Œåªçµ¦æ‚¨ 3 å€‹é—œéµæƒ…å ±ã€‚";
        } else if (maxE === 'water' || maxE === 'earth') {
            solution = "æ‚¨åå‘ç©©å¥ï¼Œä½†ç ”ç©¶è€—æ™‚ã€‚æˆ‘å€‘æä¾›<b>ã€Œæ·±åº¦æ¿ƒç¸®åŒ…ã€</b>ï¼Œ5åˆ†é˜çœ‹å®Œæ³•äººç´šé‚è¼¯æ¢³ç†ã€‚";
        } else if (maxE === 'dark') {
            solution = "ä½œç‚ºé€†å‹¢äº¤æ˜“è€…ï¼Œæˆ‘å€‘æä¾›<b>ã€Œæƒ…ç·’é‡åŒ–æŒ‡æ¨™ã€</b>ï¼Œä½è­‰æ‚¨çš„ç›´è¦ºï¼Œç²¾æº–æ•æ‰è½‰æŠ˜é»ã€‚";
        } else {
            solution = "å°æ–¼è¿½é€é¡˜æ™¯çš„æ‚¨ï¼Œæˆ‘å€‘ç›£æ§<b>ã€Œæ•˜äº‹åŸºæœ¬é¢ã€</b>çš„è®ŠåŒ–ï¼Œç¢ºä¿æ‚¨çš„ä¿¡ä»°æœ‰æ•¸æ“šæ”¯æ’ã€‚";
        }
        document.getElementById('result-solution').innerHTML = solution;
        
        // NEW: é è¨­å±•é–‹æ•…äº‹å€å¡Šï¼Œè®“ä½¿ç”¨è€…ç¬¬ä¸€çœ¼çœ‹åˆ°
        document.querySelector('#result-screen .collapsible-card').classList.add('active');
    }

    // ================= 3. UTILITIES & CTA LOGIC =================
    
    // [æ–°å¢] Collapsible Card Toggle
    function toggleCollapse(card) {
        card.classList.toggle('active');
    }

    function handleCTA(btn) {
        // CTA Feedback
        btn.disabled = true;
        btn.style.opacity = '0.7';
        btn.innerHTML = `<span style="animation: pulse 1s infinite">è·³è½‰ä¸­...</span>`;
        
        setTimeout(() => {
            alert("âœ¨ ç³»çµ±æ¬Šé™ç¢ºèªï¼\n\næ­£åœ¨é–‹å•Ÿå‚³é€é–€ï¼Œå‰å¾€é ˜å–æ‚¨çš„ã€Œå°ˆå±¬æ”»ç•¥æ›¸ã€ã€‚");
            // è·³è½‰ç›®æ¨™ï¼šé ˜å–æ”»ç•¥æ›¸é é¢
            window.location.href = "https://nanglekimo.github.io/testest/login.html";
        }, 300);
    }

</script>

</body>
</html>